<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compose ä»£ç ç»„ç»‡ä¸æ¶æ„å®æˆ˜æŠ€å·§ - Fidroid</title>
    <meta name="description" content="æ·±å…¥æ¢è®¨å¤§å‹é¡¹ç›®ä¸­çš„ Compose ä»£ç ç»„ç»‡ä¸æ¶æ„è®¾è®¡ï¼Œæ¶µç›–æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–ã€çŠ¶æ€ç®¡ç†ã€ä¾èµ–æ³¨å…¥åŠå¯¼èˆªç­‰æ ¸å¿ƒæŠ€å·§ã€‚">
    <style>

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.8; color: #e5e7eb; background: #020617; }
        .navbar { background: rgba(15,23,42,0.98); backdrop-filter: blur(10px); position: fixed; top: 0; width: 100%; z-index: 1000; }
        .nav-container { max-width: 900px; margin: 0 auto; padding: 1rem 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: bold; color: #38bdf8; text-decoration: none; letter-spacing: 0.08em; text-transform: uppercase; }
        .back-link { color: #9ca3af; text-decoration: none; font-size: 0.9rem; }
        .back-link:hover { color: #38bdf8; }
        .article-header { padding: 120px 20px 60px; background: radial-gradient(circle at top left, #dc2626 0, transparent 50%), radial-gradient(circle at bottom right, #7c3aed 0, transparent 55%), #020617; text-align: center; }
        .article-header h1 { max-width: 800px; margin: 0 auto 1rem; font-size: 2.5rem; font-weight: 800; letter-spacing: -0.03em; color: #fff; }
        .article-meta { color: #9ca3af; font-size: 0.9rem; margin-bottom: 1.5rem; }
        .article-tags { display: flex; justify-content: center; flex-wrap: wrap; gap: 0.5rem; }
        .article-tag { padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.75rem; background: rgba(15,23,42,0.85); border: 1px solid rgba(220,38,38,0.4); color: #f87171; }
        .article-content { max-width: 800px; margin: 0 auto; padding: 60px 20px 80px; }
        .article-content h2 { font-size: 1.6rem; margin: 2.5rem 0 1rem; color: #f9fafb; border-left: 4px solid #dc2626; padding-left: 1rem; }
        .article-content h3 { font-size: 1.25rem; margin: 2rem 0 0.75rem; color: #e5e7eb; }
        .article-content p { margin-bottom: 1.25rem; color: #d1d5db; }
        .article-content ul, .article-content ol { margin: 1rem 0 1.5rem 1.5rem; color: #d1d5db; }
        .article-content li { margin-bottom: 0.5rem; }
        .article-content strong { color: #f9fafb; }
        pre { background: #0f172a; border: 1px solid rgba(220,38,38,0.3); border-radius: 12px; padding: 1.25rem; overflow-x: auto; margin: 1.5rem 0; font-size: 0.85rem; line-height: 1.6; }
        code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; color: #e5e7eb; }
        .code-keyword { color: #c084fc; }
        .code-func { color: #38bdf8; }
        .code-type { color: #4ade80; }
        .code-string { color: #fb7185; }
        .code-comment { color: #6b7280; font-style: italic; }
        .footer { background: #020617; border-top: 1px solid #111827; padding: 2rem; text-align: center; color: #6b7280; }
        .footer a { color: #38bdf8; text-decoration: none; }
    
        .toc {
            background: rgba(15,23,42,0.6);
            border: 1px solid rgba(220,38,38,0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0 3rem;
        }
        .toc-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #f87171;
            margin-bottom: 1rem;
        }
        .toc-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .toc-list li {
            margin: 0.5rem 0;
        }
        .toc-h2 {
            margin-left: 0;
        }
        .toc-list a {
            color: #d1d5db;
            text-decoration: none;
        }
        .toc-list a:hover {
            color: #38bdf8;
        }
        .code-bad {
            background: rgba(220,38,38,0.1);
            border-left: 3px solid #ef4444;
            padding: 1rem;
            margin: 1rem 0;
        }
        .code-good {
            background: rgba(34,197,94,0.1);
            border-left: 3px solid #22c55e;
            padding: 1rem;
            margin: 1rem 0;
        }
        .reference {
            background: rgba(15,23,42,0.6);
            border: 1px solid rgba(148,163,184,0.2);
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin: 1rem 0;
            font-size: 0.9rem;
        }
        .reference-title {
            font-weight: 600;
            color: #94a3b8;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }
        .reference a { color: #38bdf8; }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="logo">Fidroid</a>
            <a href="../index.html#blog" class="back-link">â† è¿”å›åšå®¢åˆ—è¡¨</a>
        </div>
    </nav>

    <header class="article-header">
        <h1>Compose ä»£ç ç»„ç»‡ä¸æ¶æ„å®æˆ˜æŠ€å·§</h1>
        <p class="article-meta">2024-12-23 Â· 40-45 min Â· æ¶æ„è®¾è®¡</p>
        <div class="article-tags">
            <span class="article-tag">æ¶æ„è®¾è®¡</span>
            <span class="article-tag">ä»£ç ç»„ç»‡</span>
            <span class="article-tag">Clean Architecture</span>
            <span class="article-tag">æœ€ä½³å®è·µ</span>
        </div>
    </header>

    <article class="article-content">
        <nav class="toc">
            <div class="toc-title">ğŸ“š ç›®å½•</div>
            <ul class="toc-list">
                <li class="toc-h2"><a href="#i-æ¨¡å—åŒ–ä¸åŒ…ç»“æ„">I. æ¨¡å—åŒ–ä¸åŒ…ç»“æ„</a></li>
                <li class="toc-h2"><a href="#ii-ui-ç»„ä»¶åŒ–ä¸å¤ç”¨">II. UI ç»„ä»¶åŒ–ä¸å¤ç”¨</a></li>
                <li class="toc-h2"><a href="#iii-viewmodel-ä¸çŠ¶æ€ç®¡ç†æ¶æ„">III. ViewModel ä¸çŠ¶æ€ç®¡ç†æ¶æ„</a></li>
                <li class="toc-h2"><a href="#iv-ä¾èµ–æ³¨å…¥-hilt-å®æˆ˜">IV. ä¾èµ–æ³¨å…¥ (Hilt) å®æˆ˜</a></li>
                <li class="toc-h2"><a href="#v-å¯¼èˆªä¸è·¯ç”±æ¶æ„">V. å¯¼èˆªä¸è·¯ç”±æ¶æ„</a></li>
                <li class="toc-h2"><a href="#vi-ä¸šåŠ¡é€»è¾‘ä¸-ui-åˆ†ç¦»">VI. ä¸šåŠ¡é€»è¾‘ä¸ UI åˆ†ç¦»</a></li>
                <li class="toc-h2"><a href="#vii-ä¸»é¢˜ä¸æ ·å¼ç®¡ç†">VII. ä¸»é¢˜ä¸æ ·å¼ç®¡ç†</a></li>
                <li class="toc-h2"><a href="#viii-æµ‹è¯•ä¸å¯ç»´æŠ¤æ€§">VIII. æµ‹è¯•ä¸å¯ç»´æŠ¤æ€§</a></li>
            </ul>
        </nav>
<p>éšç€ Compose é¡¹ç›®è§„æ¨¡çš„å¢é•¿ï¼Œå¦‚ä½•ç»„ç»‡ä»£ç ã€è®¾è®¡åˆç†çš„æ¶æ„ä»¥åŠç¡®ä¿ä»£ç çš„å¯ç»´æŠ¤æ€§æˆä¸ºäº†æ ¸å¿ƒé—®é¢˜ã€‚æœ¬æ–‡æ€»ç»“äº†åœ¨å®é™…å¤§å‹é¡¹ç›®ä¸­ä½¿ç”¨ Compose çš„æ¶æ„è®¾è®¡å’Œä»£ç ç»„ç»‡æ¨¡å¼ï¼Œæ¶µç›–ä»ç»„ä»¶æ‹†åˆ†åˆ°æ•´ä½“æ¶æ„è®¾è®¡çš„å…¨æ–¹ä½æŠ€å·§ã€‚</p>
        <h3 id="-å®˜æ–¹å‚è€ƒ">ğŸ“š å®˜æ–¹å‚è€ƒ</h3>
        <ul>
        <li><a href="https://developer.android.com/topic/architecture" target="_blank">Guide to app architecture - Android Developers</a></li>
        <li><a href="https://developer.android.com/jetpack/compose/architecture" target="_blank">Architecture in Jetpack Compose - Android Developers</a></li>
        <li><a href="https://developer.android.com/modern-android-development/architecture" target="_blank">Modern Android Development (MAD) skills - Architecture</a></li>
        </ul>
        <h3 id="ç›®å½•">ç›®å½•</h3>
        <ul>
        <li><a href="#i-æ¨¡å—åŒ–ä¸åŒ…ç»“æ„" target="_blank">I. æ¨¡å—åŒ–ä¸åŒ…ç»“æ„</a></li>
        <li><a href="#ii-ui-ç»„ä»¶åŒ–ä¸å¤ç”¨" target="_blank">II. UI ç»„ä»¶åŒ–ä¸å¤ç”¨</a></li>
        <li><a href="#iii-viewmodel-ä¸çŠ¶æ€ç®¡ç†æ¶æ„" target="_blank">III. ViewModel ä¸çŠ¶æ€ç®¡ç†æ¶æ„</a></li>
        <li><a href="#iv-ä¾èµ–æ³¨å…¥-hilt-å®æˆ˜" target="_blank">IV. ä¾èµ–æ³¨å…¥ (Hilt) å®æˆ˜</a></li>
        <li><a href="#v-å¯¼èˆªä¸è·¯ç”±æ¶æ„" target="_blank">V. å¯¼èˆªä¸è·¯ç”±æ¶æ„</a></li>
        <li><a href="#vi-ä¸šåŠ¡é€»è¾‘ä¸-ui-åˆ†ç¦»" target="_blank">VI. ä¸šåŠ¡é€»è¾‘ä¸ UI åˆ†ç¦»</a></li>
        <li><a href="#vii-ä¸»é¢˜ä¸æ ·å¼ç®¡ç†" target="_blank">VII. ä¸»é¢˜ä¸æ ·å¼ç®¡ç†</a></li>
        <li><a href="#viii-æµ‹è¯•ä¸å¯ç»´æŠ¤æ€§" target="_blank">VIII. æµ‹è¯•ä¸å¯ç»´æŠ¤æ€§</a></li>
        </ul>
        <h3 id="i-æ¨¡å—åŒ–ä¸åŒ…ç»“æ„">I. æ¨¡å—åŒ–ä¸åŒ…ç»“æ„</h3>
        <p>åˆç†çš„æ¨¡å—åŒ–å’ŒåŒ…ç»“æ„æ˜¯å¤§å‹é¡¹ç›®çš„åŸºç¡€ã€‚</p>
        <h4>1.1 æŒ‰åŠŸèƒ½æ¨¡å—åŒ– (Feature-based Modularization)</h4>
        <p>æ¨èæŒ‰åŠŸèƒ½åˆ’åˆ†æ¨¡å—ï¼Œè€ŒéæŒ‰ç»„ä»¶ç±»å‹åˆ’åˆ†ã€‚</p>
        <div class="code-good"><pre><code>
        // âœ… æ¨èçš„åŒ…ç»“æ„
com.example.myapp
â”œâ”€â”€ common              // å…¬å…±æ¨¡å—
â”‚   â”œâ”€â”€ ui              // é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ theme           // ä¸»é¢˜
â”‚   â””â”€â”€ util            // å·¥å…·ç±»
â”œâ”€â”€ data                // æ•°æ®å±‚
â”‚   â”œâ”€â”€ repository      // ä»“åº“
â”‚   â”œâ”€â”€ source          // æ•°æ®æº
â”‚   â””â”€â”€ model           // æ•°æ®æ¨¡å‹
â”œâ”€â”€ domain              // é¢†åŸŸå±‚
â”‚   â”œâ”€â”€ usecase         // ç”¨ä¾‹
â”‚   â””â”€â”€ model           // é¢†åŸŸæ¨¡å‹
â””â”€â”€ features            // åŠŸèƒ½æ¨¡å—
    â”œâ”€â”€ home            // é¦–é¡µåŠŸèƒ½
    â”‚   â”œâ”€â”€ ui          // UI ç»„ä»¶
    â”‚   â”œâ”€â”€ viewmodel   // ViewModel
    â”‚   â””â”€â”€ model       // UI æ¨¡å‹
    â””â”€â”€ profile         // ä¸ªäººä¸­å¿ƒåŠŸèƒ½
        </code></pre></div>
        <p><strong>ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</strong></p>
        <ul>
        <li>é™ä½è€¦åˆåº¦ï¼šæ¨¡å—ä¹‹é—´èŒè´£æ¸…æ™°</li>
        <li>æå‡æ„å»ºé€Ÿåº¦ï¼šæŒ‰éœ€ç¼–è¯‘</li>
        <li>æ–¹ä¾¿å¹¶è¡Œå¼€å‘ï¼šä¸åŒå›¢é˜Ÿè´Ÿè´£ä¸åŒæ¨¡å—</li>
        </ul>
        <h4>1.2 å†…éƒ¨/å¤–éƒ¨ API åˆ†ç¦»</h4>
        <p>åœ¨æ¨¡å—å†…åŒºåˆ†å…¬å¼€çš„ API å’Œå†…éƒ¨å®ç°çš„ç§æœ‰ç±»ã€‚</p>
        <pre><code>
        // features/home/ui/HomeContent.kt
@Composable
fun HomeContent(...) { ... }  // å…¬å¼€ç»„ä»¶

// features/home/ui/internal/Header.kt
@Composable
internal fun HomeHeader(...) { ... }  // å†…éƒ¨ç»„ä»¶ï¼Œä¸æš´éœ²ç»™å¤–éƒ¨
        </code></pre>
        <h3 id="ii-ui-ç»„ä»¶åŒ–ä¸å¤ç”¨">II. UI ç»„ä»¶åŒ–ä¸å¤ç”¨</h3>
        <p>Compose çš„å£°æ˜å¼ç‰¹æ€§è®©ç»„ä»¶åŒ–å˜å¾—éå¸¸å®¹æ˜“ï¼Œä½†è¿‡åº¦æ‹†åˆ†æˆ–ä¸åˆç†çš„æ‹†åˆ†ä¹Ÿä¼šå¸¦æ¥é—®é¢˜ã€‚</p>
        <h4>2.1 åŸå­åŒ–ç»„ä»¶è®¾è®¡</h4>
        <p>å‚è€ƒåŸå­è®¾è®¡ç†è®º (Atomic Design) æ‹†åˆ†ç»„ä»¶ã€‚</p>
        <ul>
        <li><strong>Atoms (åŸå­)</strong>ï¼šæœ€å°å•ä½ï¼Œå¦‚ Button, Text, Icon</li>
        <li><strong>Molecules (åˆ†å­)</strong>ï¼šåŸå­ç»„åˆï¼Œå¦‚ SearchBar (Text + Icon)</li>
        <li><strong>Organisms (æœ‰æœºä½“)</strong>ï¼šåˆ†å­ç»„åˆï¼Œå¦‚ NavBar, ProductCard</li>
        <li><strong>Templates (æ¨¡æ¿)</strong>ï¼šé¡µé¢ç»“æ„å¸ƒå±€</li>
        <li><strong>Pages (é¡µé¢)</strong>ï¼šå…·ä½“å†…å®¹çš„é¡µé¢</li>
        </ul>
        <pre><code>
        // atoms/MyButton.kt
@Composable
fun MyButton(onClick: () -&gt; Unit, text: String) { ... }

// molecules/SearchBar.kt
@Composable
fun SearchBar(query: String, onQueryChange: (String) -&gt; Unit) {
    Row {
        MyIcon(Icons.Default.Search)
        MyTextField(query, onQueryChange)
    }
}
        </code></pre>
        <h4>2.2 æå–é€šç”¨ç»„ä»¶åº“</h4>
        <p>å°†è·¨åŠŸèƒ½çš„ UI ç»„ä»¶æå–åˆ°ç‹¬ç«‹çš„ <code>common:ui</code> æ¨¡å—ä¸­ã€‚</p>
        <pre><code>
        // common-ui/src/main/java/com/example/common/ui/LoadingView.kt
@Composable
fun LoadingView(modifier: Modifier = Modifier) {
    Box(modifier = modifier.fillMaxSize()) {
        CircularProgressIndicator(modifier = Modifier.align(Alignment.Center))
    }
}
        </code></pre>
        <h4>2.3 ä½¿ç”¨ CompositionLocal ä¼ é€’å…¨å±€é…ç½®</h4>
        <pre><code>
        // common-ui/src/main/java/com/example/common/ui/LocalAppConfig.kt
val LocalAppConfig = compositionLocalOf { AppConfig() }

@Composable
fun MyAppTheme(content: @Composable () -&gt; Unit) {
    val config = remember { AppConfig() }
    CompositionLocalProvider(LocalAppConfig provides config) {
        content()
    }
}
        </code></pre>
        <h3 id="iii-viewmodel-ä¸çŠ¶æ€ç®¡ç†æ¶æ„">III. ViewModel ä¸çŠ¶æ€ç®¡ç†æ¶æ„</h3>
        <p>ViewModel æ˜¯è¿æ¥ UI å’Œä¸šåŠ¡é€»è¾‘çš„æ ¸å¿ƒã€‚</p>
        <h4>3.1 ç»Ÿä¸€ UI State æ¨¡å‹</h4>
        <p>ä½¿ç”¨ Sealed Class æˆ– Data Class å®šä¹‰å®Œæ•´çš„ UI çŠ¶æ€ã€‚</p>
        <div class="code-good"><pre><code>
        // âœ… æ¨èçš„ UI State å®šä¹‰
sealed class HomeUiState {
    object Loading : HomeUiState()
    data class Success(val products: List&lt;Product&gt;, val banner: List&lt;Banner&gt;) : HomeUiState()
    data class Error(val message: String) : HomeUiState()
}

class HomeViewModel : ViewModel() {
    private val _uiState = MutableStateFlow&lt;HomeUiState&gt;(HomeUiState.Loading)
    val uiState: StateFlow&lt;HomeUiState&gt; = _uiState.asStateFlow()
    
    init {
        loadData()
    }
    
    private fun loadData() {
        // åŠ è½½æ•°æ®å¹¶æ›´æ–° _uiState
    }
}
        </code></pre></div>
        <h4>3.2 çŠ¶æ€æå‡ (State Hoisting) æ¨¡å¼</h4>
        <div class="code-good"><pre><code>
        // âœ… çŠ¶æ€æå‡æ¨¡å¼ï¼šStateless Composable
@Composable
fun ProductList(
    products: List&lt;Product&gt;,
    onProductClick: (Product) -&gt; Unit
) {
    LazyColumn {
        items(products) { product -&gt;
            ProductRow(product, onClick = { onProductClick(product) })
        }
    }
}

// Stateful Composableï¼šè´Ÿè´£çŠ¶æ€ç®¡ç†
@Composable
fun ProductScreen(viewModel: ProductViewModel = hiltViewModel()) {
    val uiState by viewModel.uiState.collectAsState()
    
    ProductList(
        products = (uiState as? ProductUiState.Success)?.products ?: emptyList(),
        onProductClick = { viewModel.onProductSelected(it) }
    )
}
        </code></pre></div>
        <h3 id="iv-ä¾èµ–æ³¨å…¥-hilt-å®æˆ˜">IV. ä¾èµ–æ³¨å…¥ (Hilt) å®æˆ˜</h3>
        <p>Hilt æ˜¯ Android å®˜æ–¹æ¨èçš„ DI æ¡†æ¶ï¼Œåœ¨ Compose ä¸­åº”ç”¨å¹¿æ³›ã€‚</p>
        <h4>4.1 æ³¨å…¥ ViewModel</h4>
        <pre><code>
        @HiltViewModel
class UserViewModel @Inject constructor(
    private val userRepository: UserRepository
) : ViewModel() {
    // ...
}

@Composable
fun UserScreen(viewModel: UserViewModel = hiltViewModel()) {
    // ä½¿ç”¨æ³¨å…¥çš„ ViewModel
}
        </code></pre>
        <h4>4.2 æ³¨å…¥ Repository å’Œ UseCase</h4>
        <pre><code>
        @Module
@InstallIn(SingletonComponent::class)
object AppModule {
    @Provides
    @Singleton
    fun provideUserRepository(api: ApiService): UserRepository {
        return UserRepositoryImpl(api)
    }
}
        </code></pre>
        <h3 id="v-å¯¼èˆªä¸è·¯ç”±æ¶æ„">V. å¯¼èˆªä¸è·¯ç”±æ¶æ„</h3>
        <p>Compose Navigation æä¾›äº†ç±»å‹å®‰å…¨çš„å¯¼èˆªæ–¹æ¡ˆã€‚</p>
        <h4>5.1 ç±»å‹å®‰å…¨è·¯ç”± (Type-safe Navigation)</h4>
        <p>åœ¨ Compose 2.8.0+ ä¸­æ¨èä½¿ç”¨ç±»å‹å®‰å…¨çš„è·¯ç”±ã€‚</p>
        <pre><code>
        // å®šä¹‰è·¯ç”±æ¨¡å‹
@Serializable
object Home

@Serializable
data class Profile(val userId: String)

// é…ç½®å¯¼èˆª
@Composable
fun AppNavigation(navController: NavHostController) {
    NavHost(navController = navController, startDestination = Home) {
        composable&lt;Home&gt; {
            HomeScreen(onNavigateToProfile = { userId -&gt;
                navController.navigate(Profile(userId))
            })
        }
        composable&lt;Profile&gt; { backStackEntry -&gt;
            val profile: Profile = backStackEntry.toRoute()
            ProfileScreen(userId = profile.userId)
        }
    }
}
        </code></pre>
        <h4>5.2 æŠ½ç¦»å¯¼èˆªé€»è¾‘</h4>
        <p>å°†å¯¼èˆªè·¯å¾„å®šä¹‰åœ¨ç‹¬ç«‹çš„æ¨¡å—æˆ–æ–‡ä»¶ä¸­ã€‚</p>
        <pre><code>
        // navigation/Screen.kt
sealed class Screen(val route: String) {
    object Home : Screen("home")
    object Profile : Screen("profile/{userId}") {
        fun createRoute(userId: String) = "profile/$userId"
    }
}
        </code></pre>
        <h3 id="vi-ä¸šåŠ¡é€»è¾‘ä¸-ui-åˆ†ç¦»">VI. ä¸šåŠ¡é€»è¾‘ä¸ UI åˆ†ç¦»</h3>
        <p>ä¿æŒ UI å±‚çº¯ç²¹ï¼Œä¸šåŠ¡é€»è¾‘ä¸‹æ²‰ã€‚</p>
        <h4>6.1 ä½¿ç”¨ UseCase (Interactor) æ¨¡å¼</h4>
        <pre><code>
        class GetProductListUseCase @Inject constructor(
    private val repository: ProductRepository
) {
    operator fun invoke(): Flow&lt;List&lt;Product&gt;&gt; = repository.getProducts()
}

@HiltViewModel
class ProductViewModel @Inject constructor(
    private val getProductListUseCase: GetProductListUseCase
) : ViewModel() {
    // è°ƒç”¨ UseCase è€Œéç›´æ¥è°ƒç”¨ Repository
}
        </code></pre>
        <h4>6.2 åŒºåˆ† UI Model å’Œ Data Model</h4>
        <pre><code>
        // Data Model (Repository å±‚)
data class ProductEntity(val id: Int, val name: String, val price: Double)

// UI Model (UI å±‚)
data class ProductUiModel(val id: Int, val title: String, val formattedPrice: String)

// è½¬æ¢é€»è¾‘
fun ProductEntity.toUiModel() = ProductUiModel(
    id = id,
    title = name,
    formattedPrice = "$${price}"
)
        </code></pre>
        <h3 id="vii-ä¸»é¢˜ä¸æ ·å¼ç®¡ç†">VII. ä¸»é¢˜ä¸æ ·å¼ç®¡ç†</h3>
        <p>é›†ä¸­ç®¡ç†ä¸»é¢˜å’Œæ ·å¼ã€‚</p>
        <h4>7.1 è‡ªå®šä¹‰ Design System</h4>
        <pre><code>
        // theme/MyTheme.kt
object MyTheme {
    val colors: MyColors
        @Composable
        get() = LocalMyColors.current
        
    val typography: MyTypography
        @Composable
        get() = LocalMyTypography.current
}

@Composable
fun MyTheme(
    colors: MyColors = MyDefaultColors,
    content: @Composable () -&gt; Unit
) {
    CompositionLocalProvider(
        LocalMyColors provides colors,
        // ...
    ) {
        content()
    }
}
        </code></pre>
        <h4>7.2 æ ·å¼æ‰©å±•</h4>
        <pre><code>
        // UI ç»„ä»¶ä¸­ä½¿ç”¨è‡ªå®šä¹‰ä¸»é¢˜
@Composable
fun StyledButton(text: String) {
    Button(
        colors = ButtonDefaults.buttonColors(
            backgroundColor = MyTheme.colors.primary
        )
    ) {
        Text(text, style = MyTheme.typography.button)
    }
}
        </code></pre>
        <h3 id="viii-æµ‹è¯•ä¸å¯ç»´æŠ¤æ€§">VIII. æµ‹è¯•ä¸å¯ç»´æŠ¤æ€§</h3>
        <p>æ¶æ„è®¾è®¡çš„æœ€ç»ˆç›®æ ‡æ˜¯å¯æµ‹è¯•å’Œå¯ç»´æŠ¤ã€‚</p>
        <h4>8.1 UI ç»„ä»¶çš„å¯æµ‹è¯•æ€§</h4>
        <pre><code>
        @Test
fun testProductRow() {
    composeTestRule.setContent {
        ProductRow(
            product = ProductUiModel(1, "Test", "$10"),
            onClick = { }
        )
    }
    
    composeTestRule.onNodeWithText("Test").assertIsDisplayed()
}
        </code></pre>
        <h4>8.2 ViewModel çš„å•å…ƒæµ‹è¯•</h4>
        <pre><code>
        @Test
fun testViewModelLoadData() = runTest {
    val viewModel = ProductViewModel(fakeUseCase)
    viewModel.loadData()
    
    val state = viewModel.uiState.value
    assert(state is ProductUiState.Success)
}
        </code></pre>
        <h3 id="æ€»ç»“">æ€»ç»“</h3>
        <p>Compose ä»£ç ç»„ç»‡ä¸æ¶æ„è®¾è®¡çš„æ ¸å¿ƒåŸåˆ™ï¼š</p>
        <ul>
        <li>âœ… <strong>æŒ‰åŠŸèƒ½æ¨¡å—åŒ–</strong>ï¼šä¿æŒæ¨¡å—èŒè´£å•ä¸€</li>
        <li>âœ… <strong>çŠ¶æ€æå‡</strong>ï¼šè®©ç»„ä»¶å˜å¾—æ— çŠ¶æ€ã€æ˜“æµ‹è¯•</li>
        <li>âœ… <strong>å•ä¸€æ•°æ®æº</strong>ï¼šUI State æ˜¯ UI çš„å”¯ä¸€çœŸç†</li>
        <li>âœ… <strong>DI å®æˆ˜</strong>ï¼šåˆ©ç”¨ Hilt ç®€åŒ–ä¾èµ–ç®¡ç†</li>
        <li>âœ… <strong>é€»è¾‘ä¸‹æ²‰</strong>ï¼šä¸šåŠ¡é€»è¾‘æ”¾åœ¨ UseCase å’Œ ViewModel</li>
        <li>âœ… <strong>ç»Ÿä¸€ä¸»é¢˜</strong>ï¼šé›†ä¸­ç®¡ç† Design System</li>
        </ul>
        <p>æŒæ¡è¿™äº›æŠ€å·§ï¼Œå¯ä»¥æ„å»ºå‡ºç»“æ„æ¸…æ™°ã€æ˜“äºæ‰©å±•å’Œç»´æŠ¤çš„å¤§å‹ Compose åº”ç”¨ã€‚</p>
        <p>---</p>
        <h3 id="æ¨èé˜…è¯»">æ¨èé˜…è¯»</h3>
        <ul>
        <li><a href="https://developer.android.com/topic/architecture" target="_blank">Guide to app architecture - Android Developers</a></li>
        <li><a href="https://developer.android.com/jetpack/compose/architecture" target="_blank">Architecture in Jetpack Compose - Android Developers</a></li>
        <li><a href="https://developer.android.com/modern-android-development/architecture" target="_blank">Modern Android Development (MAD) skills - Architecture</a></li>
        </ul>
        <div class="reference">
            <div class="reference-title">ğŸ“š å®˜æ–¹å‚è€ƒ</div>
            <a href="https://developer.android.com/topic/architecture" target="_blank">Guide to app architecture - Android Developers</a><br>
            <a href="https://developer.android.com/jetpack/compose/architecture" target="_blank">Architecture in Jetpack Compose - Android Developers</a><br>
            <a href="https://developer.android.com/modern-android-development/architecture" target="_blank">Modern Android Development (MAD) skills - Architecture</a>
        </div>
    </article>

    <footer class="footer">
        <p>&copy; 2024 Fidroid. <a href="../index.html">è¿”å›é¦–é¡µ</a></p>
    </footer>
</body>
</html>
