<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compose Runtime åŸç†æ·±å…¥è§£æï¼šä» Composition åˆ° Node Tree - Fidroid</title>
    <meta name="description" content="æ·±å…¥ç†è§£ Compose Runtime çš„å·¥ä½œåŸç†ï¼Œæ¢ç´¢ Compositionã€Applierã€Node Tree çš„åä½œæœºåˆ¶ï¼Œæ­ç§˜å£°æ˜å¼ UI å¦‚ä½•è½¬åŒ–ä¸ºå®é™…æ¸²æŸ“ã€‚">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.8;
            color: #e5e7eb;
            background: #020617;
        }
        .navbar {
            background: rgba(15,23,42,0.98);
            backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
        }
        .nav-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1rem 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #38bdf8;
            text-decoration: none;
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }
        .back-link { color: #9ca3af; text-decoration: none; font-size: 0.9rem; }
        .back-link:hover { color: #38bdf8; }

        .article-header {
            padding: 120px 20px 60px;
            background: radial-gradient(circle at top left, #059669 0, transparent 50%),
                        radial-gradient(circle at bottom right, #7c3aed 0, transparent 55%),
                        #020617;
            text-align: center;
        }
        .article-header h1 {
            max-width: 800px;
            margin: 0 auto 1rem;
            font-size: 2.5rem;
            font-weight: 800;
            letter-spacing: -0.03em;
            color: #fff;
        }
        .article-meta { color: #9ca3af; font-size: 0.9rem; margin-bottom: 1.5rem; }
        .article-tags { display: flex; justify-content: center; flex-wrap: wrap; gap: 0.5rem; }
        .article-tag {
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-size: 0.75rem;
            background: rgba(15,23,42,0.85);
            border: 1px solid rgba(5,150,105,0.4);
            color: #6ee7b7;
        }

        .article-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 60px 20px 80px;
        }
        .article-content h2 {
            font-size: 1.6rem;
            margin: 2.5rem 0 1rem;
            color: #f9fafb;
            border-left: 4px solid #059669;
            padding-left: 1rem;
        }
        .article-content h3 { font-size: 1.25rem; margin: 2rem 0 0.75rem; color: #e5e7eb; }
        .article-content p { margin-bottom: 1.25rem; color: #d1d5db; }
        .article-content ul, .article-content ol { margin: 1rem 0 1.5rem 1.5rem; color: #d1d5db; }
        .article-content li { margin-bottom: 0.5rem; }
        .article-content strong { color: #f9fafb; }
        .article-content a { color: #38bdf8; text-decoration: underline; }

        pre {
            background: #0f172a;
            border: 1px solid rgba(5,150,105,0.3);
            border-radius: 12px;
            padding: 1.25rem;
            overflow-x: auto;
            margin: 1.5rem 0;
            font-size: 0.85rem;
            line-height: 1.6;
        }
        code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; color: #e5e7eb; }
        .code-keyword { color: #c084fc; }
        .code-func { color: #38bdf8; }
        .code-type { color: #4ade80; }
        .code-string { color: #fbbf24; }
        .code-comment { color: #6b7280; }
        .code-annotation { color: #f472b6; }

        .tip-box {
            background: rgba(5,150,105,0.1);
            border: 1px solid rgba(5,150,105,0.3);
            border-radius: 12px;
            padding: 1.25rem;
            margin: 1.5rem 0;
        }
        .tip-box.warning {
            background: rgba(245,158,11,0.1);
            border-color: rgba(245,158,11,0.3);
        }
        .tip-title { font-weight: 600; color: #6ee7b7; margin-bottom: 0.5rem; }
        .warning .tip-title { color: #fcd34d; }

        .diagram-box {
            background: #0f172a;
            border: 1px solid rgba(5,150,105,0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            font-family: ui-monospace, monospace;
            font-size: 0.85rem;
            line-height: 1.4;
            overflow-x: auto;
            white-space: pre;
            color: #9ca3af;
        }
        .diagram-highlight { color: #4ade80; }
        .diagram-accent { color: #38bdf8; }
        .diagram-warning { color: #fbbf24; }

        .footer {
            background: #0f172a;
            padding: 3rem 20px;
            text-align: center;
            border-top: 1px solid rgba(124,58,237,0.2);
        }
        .footer p { color: #6b7280; font-size: 0.9rem; }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="logo">Fidroid</a>
            <a href="../index.html#articles" class="back-link">â† è¿”å›æ–‡ç« åˆ—è¡¨</a>
        </div>
    </nav>

    <header class="article-header">
        <h1>Compose Runtime åŸç†æ·±å…¥è§£æï¼šä» Composition åˆ° Node Tree</h1>
        <div class="article-meta">ğŸ“… 2024-07-03 Â· â± 30 min Â· ğŸ”¬ åº•å±‚åŸç†</div>
        <div class="article-tags">
            <span class="article-tag">Runtime</span>
            <span class="article-tag">Composition</span>
            <span class="article-tag">Applier</span>
            <span class="article-tag">Node Tree</span>
        </div>
    </header>

    <article class="article-content">
        <p>Compose Runtime æ˜¯ Jetpack Compose çš„æ ¸å¿ƒå¼•æ“ï¼Œå®ƒè´Ÿè´£å°†ä½ ç¼–å†™çš„ @Composable å‡½æ•°è½¬åŒ–ä¸ºå®é™…çš„ UIã€‚æœ¬æ–‡å°†æ·±å…¥æ¢ç´¢ Runtime çš„å†…éƒ¨å·¥ä½œåŸç†ï¼ŒåŒ…æ‹¬ Compositionã€Composerã€Applier å’Œ Node Tree çš„åä½œæœºåˆ¶ã€‚</p>

        <h2>I. Runtime æ¶æ„æ€»è§ˆ</h2>
        
        <p>Compose Runtime å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ ¸å¿ƒå±‚æ¬¡ï¼š</p>

        <div class="diagram-box">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    <span class="diagram-highlight">@Composable å‡½æ•°</span>                         â”‚
â”‚                   ï¼ˆå£°æ˜å¼ UI æè¿°ï¼‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    <span class="diagram-accent">Composition</span>                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Composer   â”‚  â”‚  Slot Table â”‚  â”‚  Invalidations     â”‚  â”‚
â”‚  â”‚  (æ‰§è¡Œåè°ƒ) â”‚  â”‚  (çŠ¶æ€å­˜å‚¨) â”‚  â”‚  (é‡ç»„è¿½è¸ª)        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      <span class="diagram-warning">Applier</span>                               â”‚
â”‚              ï¼ˆå°†å˜æ›´åº”ç”¨åˆ° Node Treeï¼‰                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    <span class="diagram-highlight">Node Tree</span>                              â”‚
â”‚          ï¼ˆæœ€ç»ˆçš„ UI æ ‘ï¼Œå¦‚ LayoutNode æ ‘ï¼‰                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </div>

        <h3>1.1 æ ¸å¿ƒç»„ä»¶èŒè´£</h3>

        <ul>
            <li><strong>Composition</strong>ï¼šç®¡ç†æ•´ä¸ªç»„åˆè¿‡ç¨‹ï¼ŒæŒæœ‰ Slot Table å’Œ Applier</li>
            <li><strong>Composer</strong>ï¼šæ‰§è¡Œ @Composable å‡½æ•°ï¼Œåè°ƒè¯»å†™ Slot Table</li>
            <li><strong>Slot Table</strong>ï¼šå­˜å‚¨ç»„åˆçŠ¶æ€ã€Groups å’Œ Slots æ•°æ®</li>
            <li><strong>Applier</strong>ï¼šå°†ç»„åˆå˜æ›´è½¬æ¢ä¸º Node Tree æ“ä½œ</li>
            <li><strong>Node Tree</strong>ï¼šæœ€ç»ˆçš„ UI æ ‘ç»“æ„ï¼ˆAndroid ä¸Šæ˜¯ LayoutNodeï¼‰</li>
        </ul>

        <h2>II. Composition è¯¦è§£</h2>

        <h3>2.1 ä»€ä¹ˆæ˜¯ Composition</h3>

        <p>Composition æ˜¯ Compose Runtime çš„æ ¸å¿ƒç±»ï¼Œå®ƒä»£è¡¨ä¸€æ¬¡ã€Œç»„åˆã€ã€‚æ¯ä¸ª ComposeView æˆ– setContent éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Composition å®ä¾‹ï¼š</p>

        <pre><code><span class="code-comment">// Composition çš„ç®€åŒ–ç»“æ„</span>
<span class="code-keyword">class</span> <span class="code-type">CompositionImpl</span>(
    <span class="code-keyword">private val</span> parent: <span class="code-type">CompositionContext</span>,
    <span class="code-keyword">private val</span> applier: <span class="code-type">Applier</span>&lt;*&gt;,
) : <span class="code-type">Composition</span> {
    
    <span class="code-comment">// Slot Table å­˜å‚¨ç»„åˆçŠ¶æ€</span>
    <span class="code-keyword">private val</span> slotTable = <span class="code-type">SlotTable</span>()
    
    <span class="code-comment">// å¾…å¤„ç†çš„å¤±æ•ˆï¼ˆéœ€è¦é‡ç»„çš„ä½œç”¨åŸŸï¼‰</span>
    <span class="code-keyword">private val</span> invalidations = <span class="code-func">mutableListOf</span>&lt;<span class="code-type">RecomposeScope</span>&gt;()
    
    <span class="code-comment">// Composer å®ä¾‹</span>
    <span class="code-keyword">private val</span> composer: <span class="code-type">ComposerImpl</span>
    
    <span class="code-comment">// æ‰§è¡Œç»„åˆæˆ–é‡ç»„</span>
    <span class="code-keyword">override fun</span> <span class="code-func">setContent</span>(content: <span class="code-annotation">@Composable</span> () -&gt; <span class="code-type">Unit</span>) {
        <span class="code-comment">// åˆå§‹ç»„åˆ</span>
        <span class="code-func">doCompose</span>(content)
    }
    
    <span class="code-keyword">internal fun</span> <span class="code-func">recompose</span>(): <span class="code-type">Boolean</span> {
        <span class="code-comment">// å¤„ç†å¤±æ•ˆï¼Œæ‰§è¡Œé‡ç»„</span>
        <span class="code-keyword">return</span> <span class="code-func">doRecompose</span>()
    }
}</code></pre>

        <h3>2.2 Composition çš„ç”Ÿå‘½å‘¨æœŸ</h3>

        <div class="diagram-box">
<span class="diagram-highlight">åˆå§‹ç»„åˆ (Initial Composition)</span>
     â”‚
     â”œâ”€â”€ 1. åˆ›å»º Composition å®ä¾‹
     â”œâ”€â”€ 2. è°ƒç”¨ setContent(content)
     â”œâ”€â”€ 3. Composer å¼€å§‹æ‰§è¡Œ @Composable å‡½æ•°
     â”œâ”€â”€ 4. æ•°æ®å†™å…¥ Slot Table
     â”œâ”€â”€ 5. Applier æ„å»º Node Tree
     â””â”€â”€ 6. Node Tree æ¸²æŸ“åˆ°å±å¹•

<span class="diagram-accent">é‡ç»„ (Recomposition)</span>
     â”‚
     â”œâ”€â”€ 1. State å˜æ›´è§¦å‘ InvalidationScope
     â”œâ”€â”€ 2. è°ƒåº¦ recompose()
     â”œâ”€â”€ 3. Composer é‡æ–°æ‰§è¡Œå—å½±å“çš„ @Composable
     â”œâ”€â”€ 4. æ¯”è¾ƒå¹¶æ›´æ–° Slot Table
     â”œâ”€â”€ 5. Applier åº”ç”¨å·®å¼‚åˆ° Node Tree
     â””â”€â”€ 6. åªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†

<span class="diagram-warning">é”€æ¯ (Disposal)</span>
     â”‚
     â”œâ”€â”€ 1. è°ƒç”¨ dispose()
     â”œâ”€â”€ 2. æ‰§è¡Œæ‰€æœ‰ onDispose å›è°ƒ
     â”œâ”€â”€ 3. æ¸…ç† Slot Table
     â””â”€â”€ 4. é‡Šæ”¾ Node Tree
        </div>

        <h2>III. Composer æ‰§è¡Œæœºåˆ¶</h2>

        <h3>3.1 Composer çš„è§’è‰²</h3>

        <p>Composer æ˜¯æ‰§è¡Œ @Composable å‡½æ•°çš„ã€ŒæŒ‡æŒ¥å®˜ã€ã€‚æ¯ä¸ª @Composable å‡½æ•°ç¼–è¯‘åéƒ½ä¼šæ¥æ”¶ä¸€ä¸ªéšå¼çš„ Composer å‚æ•°ï¼š</p>

        <pre><code><span class="code-comment">// åŸå§‹ä»£ç </span>
<span class="code-annotation">@Composable</span>
<span class="code-keyword">fun</span> <span class="code-func">Greeting</span>(name: <span class="code-type">String</span>) {
    <span class="code-func">Text</span>(<span class="code-string">"Hello, $name"</span>)
}

<span class="code-comment">// ç¼–è¯‘åï¼ˆç®€åŒ–ï¼‰</span>
<span class="code-keyword">fun</span> <span class="code-func">Greeting</span>(
    name: <span class="code-type">String</span>,
    $composer: <span class="code-type">Composer</span>,
    $changed: <span class="code-type">Int</span>
) {
    $composer.<span class="code-func">startRestartGroup</span>(key = <span class="code-string">123</span>)
    
    <span class="code-keyword">if</span> ($changed != <span class="code-string">0</span> || !$composer.skipping) {
        <span class="code-func">Text</span>(<span class="code-string">"Hello, $name"</span>, $composer, <span class="code-string">0</span>)
    }
    
    $composer.<span class="code-func">endRestartGroup</span>()?.<span class="code-func">updateScope</span> {
        <span class="code-func">Greeting</span>(name, $composer, $changed or <span class="code-string">1</span>)
    }
}</code></pre>

        <h3>3.2 Composer æ ¸å¿ƒ API</h3>

        <pre><code><span class="code-keyword">interface</span> <span class="code-type">Composer</span> {
    <span class="code-comment">// æ˜¯å¦æ­£åœ¨åˆå§‹ç»„åˆ</span>
    <span class="code-keyword">val</span> inserting: <span class="code-type">Boolean</span>
    
    <span class="code-comment">// æ˜¯å¦å¯ä»¥è·³è¿‡å½“å‰ä½œç”¨åŸŸ</span>
    <span class="code-keyword">val</span> skipping: <span class="code-type">Boolean</span>
    
    <span class="code-comment">// å¼€å§‹ä¸€ä¸ª Group</span>
    <span class="code-keyword">fun</span> <span class="code-func">startRestartGroup</span>(key: <span class="code-type">Int</span>): <span class="code-type">Composer</span>
    <span class="code-keyword">fun</span> <span class="code-func">endRestartGroup</span>(): <span class="code-type">ScopeUpdateScope</span>?
    
    <span class="code-comment">// è®°ä½å€¼</span>
    <span class="code-keyword">fun</span> &lt;<span class="code-type">T</span>&gt; <span class="code-func">cache</span>(invalid: <span class="code-type">Boolean</span>, block: () -&gt; <span class="code-type">T</span>): <span class="code-type">T</span>
    
    <span class="code-comment">// æ£€æŸ¥å‚æ•°æ˜¯å¦å˜æ›´</span>
    <span class="code-keyword">fun</span> <span class="code-func">changed</span>(value: <span class="code-type">Any</span>?): <span class="code-type">Boolean</span>
    
    <span class="code-comment">// å‘å°„èŠ‚ç‚¹</span>
    <span class="code-keyword">fun</span> &lt;<span class="code-type">T</span>&gt; <span class="code-func">createNode</span>(factory: () -&gt; <span class="code-type">T</span>)
    <span class="code-keyword">fun</span> <span class="code-func">useNode</span>()
    
    <span class="code-comment">// è®°å½• Side Effect</span>
    <span class="code-keyword">fun</span> <span class="code-func">recordSideEffect</span>(effect: () -&gt; <span class="code-type">Unit</span>)
}</code></pre>

        <h3>3.3 Groups ä¸ä½ç½®è®°å¿†</h3>

        <p>Composer ä½¿ç”¨ Groups æ¥ç»„ç»‡ Slot Table ä¸­çš„æ•°æ®ã€‚æ¯ä¸ª @Composable è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Groupï¼š</p>

        <pre><code><span class="code-annotation">@Composable</span>
<span class="code-keyword">fun</span> <span class="code-func">Counter</span>() {
    <span class="code-comment">// Group 1: Counter å‡½æ•°æœ¬èº«</span>
    <span class="code-keyword">var</span> count <span class="code-keyword">by</span> <span class="code-func">remember</span> { <span class="code-func">mutableStateOf</span>(<span class="code-string">0</span>) }  <span class="code-comment">// Slot: count çŠ¶æ€</span>
    
    <span class="code-func">Column</span> {  <span class="code-comment">// Group 2: Column</span>
        <span class="code-func">Text</span>(<span class="code-string">"Count: $count"</span>)  <span class="code-comment">// Group 3: Text</span>
        <span class="code-func">Button</span>(onClick = { count++ }) {  <span class="code-comment">// Group 4: Button</span>
            <span class="code-func">Text</span>(<span class="code-string">"+"</span>)  <span class="code-comment">// Group 5: åµŒå¥— Text</span>
        }
    }
}</code></pre>

        <div class="diagram-box">
Slot Table ç»“æ„ç¤ºæ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="diagram-highlight">Group 1 (Counter)</span>                                        â”‚
â”‚   â”œâ”€â”€ Slot: remember { mutableStateOf(0) } â†’ count = 0  â”‚
â”‚   â”‚                                                      â”‚
â”‚   â””â”€â”€ <span class="diagram-accent">Group 2 (Column)</span>                                   â”‚
â”‚         â”œâ”€â”€ <span class="diagram-accent">Group 3 (Text)</span>                               â”‚
â”‚         â”‚     â””â”€â”€ Slot: "Count: 0"                      â”‚
â”‚         â”‚                                                â”‚
â”‚         â””â”€â”€ <span class="diagram-accent">Group 4 (Button)</span>                             â”‚
â”‚               â”œâ”€â”€ Slot: onClick lambda                  â”‚
â”‚               â””â”€â”€ <span class="diagram-accent">Group 5 (Text)</span>                         â”‚
â”‚                     â””â”€â”€ Slot: "+"                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </div>

        <h2>IV. Applier ä¸ Node Tree</h2>

        <h3>4.1 Applier æ¥å£</h3>

        <p>Applier æ˜¯è¿æ¥ Composition å’Œ Node Tree çš„æ¡¥æ¢ã€‚å®ƒå®šä¹‰äº†å¦‚ä½•æ“ä½œèŠ‚ç‚¹æ ‘ï¼š</p>

        <pre><code><span class="code-keyword">interface</span> <span class="code-type">Applier</span>&lt;<span class="code-type">N</span>&gt; {
    <span class="code-comment">// å½“å‰èŠ‚ç‚¹</span>
    <span class="code-keyword">val</span> current: <span class="code-type">N</span>
    
    <span class="code-comment">// å‘ä¸‹ç§»åŠ¨åˆ°å­èŠ‚ç‚¹</span>
    <span class="code-keyword">fun</span> <span class="code-func">down</span>(node: <span class="code-type">N</span>)
    
    <span class="code-comment">// å‘ä¸Šè¿”å›çˆ¶èŠ‚ç‚¹</span>
    <span class="code-keyword">fun</span> <span class="code-func">up</span>()
    
    <span class="code-comment">// æ’å…¥èŠ‚ç‚¹</span>
    <span class="code-keyword">fun</span> <span class="code-func">insertTopDown</span>(index: <span class="code-type">Int</span>, instance: <span class="code-type">N</span>)
    <span class="code-keyword">fun</span> <span class="code-func">insertBottomUp</span>(index: <span class="code-type">Int</span>, instance: <span class="code-type">N</span>)
    
    <span class="code-comment">// ç§»é™¤èŠ‚ç‚¹</span>
    <span class="code-keyword">fun</span> <span class="code-func">remove</span>(index: <span class="code-type">Int</span>, count: <span class="code-type">Int</span>)
    
    <span class="code-comment">// ç§»åŠ¨èŠ‚ç‚¹</span>
    <span class="code-keyword">fun</span> <span class="code-func">move</span>(from: <span class="code-type">Int</span>, to: <span class="code-type">Int</span>, count: <span class="code-type">Int</span>)
    
    <span class="code-comment">// æ¸…ç©ºæ‰€æœ‰å­èŠ‚ç‚¹</span>
    <span class="code-keyword">fun</span> <span class="code-func">clear</span>()
}</code></pre>

        <h3>4.2 UiApplier - Android å®ç°</h3>

        <p>åœ¨ Android Compose UI ä¸­ï¼ŒUiApplier è´Ÿè´£æ“ä½œ LayoutNode æ ‘ï¼š</p>

        <pre><code><span class="code-keyword">internal class</span> <span class="code-type">UiApplier</span>(
    root: <span class="code-type">LayoutNode</span>
) : <span class="code-type">AbstractApplier</span>&lt;<span class="code-type">LayoutNode</span>&gt;(root) {
    
    <span class="code-keyword">override fun</span> <span class="code-func">insertTopDown</span>(index: <span class="code-type">Int</span>, instance: <span class="code-type">LayoutNode</span>) {
        <span class="code-comment">// è‡ªé¡¶å‘ä¸‹æ’å…¥ï¼Œä¸åšä»»ä½•æ“ä½œ</span>
    }
    
    <span class="code-keyword">override fun</span> <span class="code-func">insertBottomUp</span>(index: <span class="code-type">Int</span>, instance: <span class="code-type">LayoutNode</span>) {
        <span class="code-comment">// è‡ªåº•å‘ä¸Šæ’å…¥ï¼Œå°†èŠ‚ç‚¹æ·»åŠ åˆ°å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</span>
        current.<span class="code-func">insertAt</span>(index, instance)
    }
    
    <span class="code-keyword">override fun</span> <span class="code-func">remove</span>(index: <span class="code-type">Int</span>, count: <span class="code-type">Int</span>) {
        current.<span class="code-func">removeAt</span>(index, count)
    }
    
    <span class="code-keyword">override fun</span> <span class="code-func">move</span>(from: <span class="code-type">Int</span>, to: <span class="code-type">Int</span>, count: <span class="code-type">Int</span>) {
        current.<span class="code-func">move</span>(from, to, count)
    }
    
    <span class="code-keyword">override fun</span> <span class="code-func">onClear</span>() {
        root.<span class="code-func">removeAll</span>()
    }
}</code></pre>

        <div class="tip-box">
            <div class="tip-title">ğŸ’¡ ä¸ºä»€ä¹ˆä½¿ç”¨ Bottom-Up æ’å…¥ï¼Ÿ</div>
            <p>Compose UI ä½¿ç”¨ <code>insertBottomUp</code> ç­–ç•¥ï¼Œå› ä¸º LayoutNode çš„æµ‹é‡/å¸ƒå±€ä¾èµ–äºå­èŠ‚ç‚¹ã€‚è‡ªåº•å‘ä¸Šæ’å…¥å¯ä»¥ç¡®ä¿åœ¨çˆ¶èŠ‚ç‚¹é™„åŠ æ—¶ï¼Œå­èŠ‚ç‚¹å·²ç»å‡†å¤‡å°±ç»ªï¼Œå‡å°‘ä¸å¿…è¦çš„é‡æ–°æµ‹é‡ã€‚</p>
        </div>

        <h3>4.3 Node å‘å°„è¿‡ç¨‹</h3>

        <p>å½“é‡åˆ° Layout ç±»å‹çš„ Composableï¼ˆå¦‚ Box, Column, Textï¼‰æ—¶ï¼ŒComposer ä¼šå‘å°„èŠ‚ç‚¹ï¼š</p>

        <pre><code><span class="code-comment">// Layout Composable çš„ç®€åŒ–å®ç°</span>
<span class="code-annotation">@Composable</span>
<span class="code-keyword">inline fun</span> <span class="code-func">Layout</span>(
    content: <span class="code-annotation">@Composable</span> () -&gt; <span class="code-type">Unit</span>,
    measurePolicy: <span class="code-type">MeasurePolicy</span>
) {
    <span class="code-keyword">val</span> materialized = currentComposer.<span class="code-func">materialize</span>(content)
    
    <span class="code-func">ReusableComposeNode</span>&lt;<span class="code-type">LayoutNode</span>, <span class="code-type">Applier</span>&lt;<span class="code-type">Any</span>&gt;&gt;(
        factory = { <span class="code-type">LayoutNode</span>() },
        update = {
            <span class="code-func">set</span>(measurePolicy) { this.measurePolicy = it }
        },
        content = materialized
    )
}

<span class="code-comment">// ReusableComposeNode å†…éƒ¨</span>
<span class="code-annotation">@Composable</span>
<span class="code-keyword">inline fun</span> &lt;<span class="code-type">T</span>, <span class="code-type">E</span>&gt; <span class="code-func">ReusableComposeNode</span>(
    <span class="code-keyword">noinline</span> factory: () -&gt; <span class="code-type">T</span>,
    update: <span class="code-annotation">@DisallowComposableCalls</span> <span class="code-type">Updater</span>&lt;<span class="code-type">T</span>&gt;.() -&gt; <span class="code-type">Unit</span>,
    content: <span class="code-annotation">@Composable</span> () -&gt; <span class="code-type">Unit</span>
) {
    <span class="code-keyword">if</span> (currentComposer.inserting) {
        <span class="code-comment">// åˆå§‹ç»„åˆï¼šåˆ›å»ºæ–°èŠ‚ç‚¹</span>
        currentComposer.<span class="code-func">createNode</span>(factory)
    } <span class="code-keyword">else</span> {
        <span class="code-comment">// é‡ç»„ï¼šå¤ç”¨ç°æœ‰èŠ‚ç‚¹</span>
        currentComposer.<span class="code-func">useNode</span>()
    }
    
    <span class="code-comment">// æ›´æ–°èŠ‚ç‚¹å±æ€§</span>
    <span class="code-type">Updater</span>&lt;<span class="code-type">T</span>&gt;(currentComposer).<span class="code-func">update</span>()
    
    <span class="code-comment">// é€’å½’å¤„ç†å­å†…å®¹</span>
    <span class="code-func">content</span>()
}</code></pre>

        <h2>V. ç»„åˆæ‰§è¡Œæµç¨‹</h2>

        <h3>5.1 åˆå§‹ç»„åˆæµç¨‹</h3>

        <pre><code><span class="code-comment">// 1. åˆ›å»º Composition</span>
<span class="code-keyword">val</span> composition = <span class="code-type">Composition</span>(
    applier = <span class="code-type">UiApplier</span>(rootLayoutNode),
    parent = recomposer
)

<span class="code-comment">// 2. è®¾ç½®å†…å®¹</span>
composition.<span class="code-func">setContent</span> {
    <span class="code-func">MyApp</span>()
}

<span class="code-comment">// å†…éƒ¨æ‰§è¡Œè¿‡ç¨‹ï¼š</span>
<span class="code-keyword">private fun</span> <span class="code-func">doCompose</span>(content: <span class="code-annotation">@Composable</span> () -&gt; <span class="code-type">Unit</span>) {
    <span class="code-comment">// 1. å¼€å§‹å†™å…¥ Slot Table</span>
    slotTable.<span class="code-func">write</span> { writer -&gt;
        composer.<span class="code-func">composeContent</span>(content)
    }
    
    <span class="code-comment">// 2. åº”ç”¨å˜æ›´åˆ° Node Tree</span>
    applier.<span class="code-func">applyChanges</span>()
    
    <span class="code-comment">// 3. æ‰§è¡Œ Side Effects</span>
    <span class="code-func">runSideEffects</span>()
}</code></pre>

        <h3>5.2 é‡ç»„æµç¨‹</h3>

        <div class="diagram-box">
State å˜æ›´è§¦å‘é‡ç»„:

<span class="diagram-highlight">1. çŠ¶æ€å˜æ›´</span>
   count.value = 1  â”€â”€â†’  Snapshot ç³»ç»Ÿæ£€æµ‹åˆ°å†™å…¥
                              â†“
<span class="diagram-accent">2. æ ‡è®°å¤±æ•ˆ</span>
   æ‰¾åˆ°è¯»å–è¯¥çŠ¶æ€çš„ RecomposeScope
   å°†å…¶æ·»åŠ åˆ° Composition.invalidations
                              â†“
<span class="diagram-warning">3. è°ƒåº¦é‡ç»„</span>
   Recomposer åœ¨ä¸‹ä¸€å¸§è°ƒåº¦ recompose()
                              â†“
<span class="diagram-highlight">4. æ‰§è¡Œé‡ç»„</span>
   Composer é‡æ–°æ‰§è¡Œå¤±æ•ˆçš„ @Composable
   â”œâ”€â”€ è·³è¿‡æœªå˜æ›´çš„éƒ¨åˆ† (skipping = true)
   â”œâ”€â”€ æ›´æ–°å˜æ›´çš„éƒ¨åˆ†
   â””â”€â”€ å†™å…¥ Slot Table å·®å¼‚
                              â†“
<span class="diagram-accent">5. åº”ç”¨å·®å¼‚</span>
   Applier å°†å˜æ›´åº”ç”¨åˆ° Node Tree
   â”œâ”€â”€ æ›´æ–°èŠ‚ç‚¹å±æ€§
   â”œâ”€â”€ æ’å…¥/ç§»é™¤èŠ‚ç‚¹
   â””â”€â”€ è§¦å‘é‡æ–°æµ‹é‡/å¸ƒå±€
        </div>

        <pre><code><span class="code-keyword">internal fun</span> <span class="code-func">recompose</span>(): <span class="code-type">Boolean</span> {
    <span class="code-keyword">if</span> (invalidations.<span class="code-func">isEmpty</span>()) <span class="code-keyword">return</span> <span class="code-string">false</span>
    
    <span class="code-comment">// æ”¶é›†éœ€è¦é‡ç»„çš„ä½œç”¨åŸŸ</span>
    <span class="code-keyword">val</span> toRecompose = invalidations.<span class="code-func">toList</span>()
    invalidations.<span class="code-func">clear</span>()
    
    <span class="code-comment">// å¯¹æ¯ä¸ªä½œç”¨åŸŸæ‰§è¡Œé‡ç»„</span>
    slotTable.<span class="code-func">write</span> { writer -&gt;
        <span class="code-keyword">for</span> (scope <span class="code-keyword">in</span> toRecompose) {
            <span class="code-comment">// å®šä½åˆ°è¯¥ä½œç”¨åŸŸåœ¨ Slot Table ä¸­çš„ä½ç½®</span>
            composer.<span class="code-func">recompose</span>(scope)
        }
    }
    
    <span class="code-comment">// åº”ç”¨å˜æ›´</span>
    <span class="code-keyword">val</span> changes = composer.<span class="code-func">collectChanges</span>()
    applier.<span class="code-func">applyChanges</span>(changes)
    
    <span class="code-keyword">return</span> <span class="code-string">true</span>
}</code></pre>

        <h2>VI. Remember ä¸ State çš„å­˜å‚¨</h2>

        <h3>6.1 remember çš„å®ç°</h3>

        <pre><code><span class="code-annotation">@Composable</span>
<span class="code-keyword">inline fun</span> &lt;<span class="code-type">T</span>&gt; <span class="code-func">remember</span>(calculation: <span class="code-annotation">@DisallowComposableCalls</span> () -&gt; <span class="code-type">T</span>): <span class="code-type">T</span> {
    <span class="code-keyword">return</span> currentComposer.<span class="code-func">cache</span>(
        invalid = <span class="code-string">false</span>,  <span class="code-comment">// æ°¸è¿œæœ‰æ•ˆï¼Œä¸é‡æ–°è®¡ç®—</span>
        calculation
    )
}

<span class="code-annotation">@Composable</span>
<span class="code-keyword">inline fun</span> &lt;<span class="code-type">T</span>&gt; <span class="code-func">remember</span>(
    key1: <span class="code-type">Any</span>?,
    calculation: <span class="code-annotation">@DisallowComposableCalls</span> () -&gt; <span class="code-type">T</span>
): <span class="code-type">T</span> {
    <span class="code-keyword">return</span> currentComposer.<span class="code-func">cache</span>(
        invalid = currentComposer.<span class="code-func">changed</span>(key1),  <span class="code-comment">// key å˜åŒ–æ—¶é‡æ–°è®¡ç®—</span>
        calculation
    )
}

<span class="code-comment">// Composer.cache å®ç°</span>
<span class="code-keyword">fun</span> &lt;<span class="code-type">T</span>&gt; <span class="code-func">cache</span>(invalid: <span class="code-type">Boolean</span>, block: () -&gt; <span class="code-type">T</span>): <span class="code-type">T</span> {
    <span class="code-keyword">return if</span> (inserting || invalid) {
        <span class="code-comment">// åˆå§‹ç»„åˆæˆ–å¤±æ•ˆæ—¶ï¼Œè®¡ç®—å¹¶å­˜å‚¨</span>
        <span class="code-keyword">val</span> value = <span class="code-func">block</span>()
        <span class="code-func">updateCachedValue</span>(value)
        value
    } <span class="code-keyword">else</span> {
        <span class="code-comment">// é‡ç»„æ—¶ï¼Œä» Slot Table è¯»å–</span>
        <span class="code-func">readCachedValue</span>()
    }
}</code></pre>

        <h3>6.2 State ä¸é‡ç»„çš„å…³è”</h3>

        <pre><code><span class="code-annotation">@Composable</span>
<span class="code-keyword">fun</span> <span class="code-func">Counter</span>() {
    <span class="code-comment">// 1. remember å°† MutableState å­˜å…¥ Slot Table</span>
    <span class="code-keyword">var</span> count <span class="code-keyword">by</span> <span class="code-func">remember</span> { <span class="code-func">mutableStateOf</span>(<span class="code-string">0</span>) }
    
    <span class="code-comment">// 2. è¯»å– count.value æ—¶ï¼ŒSnapshot ç³»ç»Ÿè®°å½•ï¼š</span>
    <span class="code-comment">//    "å½“å‰ RecomposeScope ä¾èµ–äºè¿™ä¸ª State"</span>
    <span class="code-func">Text</span>(<span class="code-string">"Count: $count"</span>)  <span class="code-comment">// è§¦å‘ count.value è¯»å–</span>
    
    <span class="code-comment">// 3. ç‚¹å‡»æ—¶ï¼Œcount.value è¢«å†™å…¥</span>
    <span class="code-comment">//    Snapshot ç³»ç»Ÿé€šçŸ¥æ‰€æœ‰ä¾èµ–çš„ RecomposeScope</span>
    <span class="code-func">Button</span>(onClick = { count++ }) {
        <span class="code-func">Text</span>(<span class="code-string">"+"</span>)
    }
}</code></pre>

        <div class="tip-box">
            <div class="tip-title">ğŸ” RecomposeScope è¿½è¸ªæœºåˆ¶</div>
            <p>æ¯ä¸ª @Composable å‡½æ•°æ‰§è¡Œæ—¶ä¼šåˆ›å»º RecomposeScopeã€‚å½“å‡½æ•°å†…éƒ¨è¯»å– State æ—¶ï¼ŒSnapshot ç³»ç»Ÿä¼šå°†è¿™ä¸ª State ä¸ RecomposeScope å…³è”ã€‚State å˜åŒ–æ—¶ï¼Œæ‰€æœ‰å…³è”çš„ Scope éƒ½ä¼šè¢«æ ‡è®°ä¸ºå¤±æ•ˆã€‚</p>
        </div>

        <h2>VII. è‡ªå®šä¹‰ Applierï¼šè¶…è¶Š UI</h2>

        <h3>7.1 Compose çš„é€šç”¨æ€§</h3>

        <p>Compose Runtime å¹¶ä¸å±€é™äº UIã€‚é€šè¿‡è‡ªå®šä¹‰ Applierï¼Œä½ å¯ä»¥å°† Compose ç”¨äºä»»ä½•æ ‘å½¢ç»“æ„ï¼š</p>

        <pre><code><span class="code-comment">// è‡ªå®šä¹‰èŠ‚ç‚¹ç±»å‹</span>
<span class="code-keyword">class</span> <span class="code-type">StringNode</span>(<span class="code-keyword">var</span> value: <span class="code-type">String</span> = <span class="code-string">""</span>) {
    <span class="code-keyword">val</span> children = <span class="code-func">mutableListOf</span>&lt;<span class="code-type">StringNode</span>&gt;()
}

<span class="code-comment">// è‡ªå®šä¹‰ Applier</span>
<span class="code-keyword">class</span> <span class="code-type">StringApplier</span>(root: <span class="code-type">StringNode</span>) : <span class="code-type">AbstractApplier</span>&lt;<span class="code-type">StringNode</span>&gt;(root) {
    <span class="code-keyword">override fun</span> <span class="code-func">insertBottomUp</span>(index: <span class="code-type">Int</span>, instance: <span class="code-type">StringNode</span>) {
        current.children.<span class="code-func">add</span>(index, instance)
    }
    
    <span class="code-keyword">override fun</span> <span class="code-func">remove</span>(index: <span class="code-type">Int</span>, count: <span class="code-type">Int</span>) {
        current.children.<span class="code-func">subList</span>(index, index + count).<span class="code-func">clear</span>()
    }
    
    <span class="code-keyword">override fun</span> <span class="code-func">move</span>(from: <span class="code-type">Int</span>, to: <span class="code-type">Int</span>, count: <span class="code-type">Int</span>) {
        <span class="code-keyword">val</span> dest = <span class="code-keyword">if</span> (from &gt; to) to <span class="code-keyword">else</span> to - count
        <span class="code-keyword">val</span> moved = current.children.<span class="code-func">subList</span>(from, from + count).<span class="code-func">toList</span>()
        current.children.<span class="code-func">subList</span>(from, from + count).<span class="code-func">clear</span>()
        current.children.<span class="code-func">addAll</span>(dest, moved)
    }
    
    <span class="code-keyword">override fun</span> <span class="code-func">onClear</span>() {
        root.children.<span class="code-func">clear</span>()
    }
}

<span class="code-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Composition</span>
<span class="code-keyword">fun</span> <span class="code-func">renderToString</span>(content: <span class="code-annotation">@Composable</span> () -&gt; <span class="code-type">Unit</span>): <span class="code-type">String</span> {
    <span class="code-keyword">val</span> root = <span class="code-type">StringNode</span>()
    <span class="code-keyword">val</span> composition = <span class="code-type">Composition</span>(
        applier = <span class="code-type">StringApplier</span>(root),
        parent = <span class="code-type">Recomposer</span>(<span class="code-type">Dispatchers</span>.Main)
    )
    composition.<span class="code-func">setContent</span>(content)
    <span class="code-keyword">return</span> root.<span class="code-func">buildString</span>()
}</code></pre>

        <h3>7.2 çœŸå®æ¡ˆä¾‹</h3>

        <ul>
            <li><strong>Compose for Web</strong>ï¼šApplier æ“ä½œ DOM èŠ‚ç‚¹</li>
            <li><strong>Compose for Desktop</strong>ï¼šApplier æ“ä½œ Skia æ¸²æŸ“èŠ‚ç‚¹</li>
            <li><strong>Molecule</strong>ï¼šå°† Compose ç”¨äºä¸šåŠ¡é€»è¾‘çŠ¶æ€ç®¡ç†</li>
            <li><strong>Mosaic</strong>ï¼šå°† Compose ç”¨äºç»ˆç«¯ UI</li>
        </ul>

        <h2>VIII. æ€§èƒ½ä¼˜åŒ–è§†è§’</h2>

        <h3>8.1 è·³è¿‡ (Skipping) æœºåˆ¶</h3>

        <pre><code><span class="code-annotation">@Composable</span>
<span class="code-keyword">fun</span> <span class="code-func">Parent</span>() {
    <span class="code-keyword">var</span> count <span class="code-keyword">by</span> <span class="code-func">remember</span> { <span class="code-func">mutableStateOf</span>(<span class="code-string">0</span>) }
    
    <span class="code-func">Column</span> {
        <span class="code-func">Text</span>(<span class="code-string">"Count: $count"</span>)  <span class="code-comment">// ä¼šé‡ç»„</span>
        <span class="code-func">ExpensiveChild</span>()        <span class="code-comment">// å¯ä»¥è·³è¿‡ï¼</span>
        <span class="code-func">Button</span>(onClick = { count++ }) {
            <span class="code-func">Text</span>(<span class="code-string">"+"</span>)
        }
    }
}

<span class="code-annotation">@Composable</span>
<span class="code-keyword">fun</span> <span class="code-func">ExpensiveChild</span>() {
    <span class="code-comment">// æ²¡æœ‰è¯»å–ä»»ä½•å˜åŒ–çš„çŠ¶æ€</span>
    <span class="code-comment">// Composer.skipping = trueï¼Œæ•´ä¸ªå‡½æ•°è¢«è·³è¿‡</span>
    <span class="code-func">Text</span>(<span class="code-string">"I'm expensive but stable"</span>)
}</code></pre>

        <h3>8.2 æ™ºèƒ½é‡ç»„èŒƒå›´</h3>

        <div class="diagram-box">
Parent é‡ç»„æ—¶çš„æ‰§è¡Œæƒ…å†µ:

<span class="diagram-highlight">@Composable fun Parent()</span>
  â”‚
  â”œâ”€â”€ count çŠ¶æ€å˜åŒ– â†’ <span class="diagram-warning">éœ€è¦é‡ç»„</span>
  â”‚
  â””â”€â”€ Column
        â”œâ”€â”€ Text("Count: $count") â†’ <span class="diagram-warning">éœ€è¦é‡ç»„</span> (è¯»å– count)
        â”‚
        â”œâ”€â”€ ExpensiveChild() â†’ <span class="diagram-highlight">è·³è¿‡ï¼</span> (å‚æ•°æœªå˜åŒ–)
        â”‚
        â””â”€â”€ Button
              â””â”€â”€ Text("+") â†’ <span class="diagram-highlight">è·³è¿‡ï¼</span> (å‚æ•°æœªå˜åŒ–)
        </div>

        <h2>IX. æ€»ç»“</h2>

        <div class="tip-box">
            <div class="tip-title">ğŸ¯ æ ¸å¿ƒè¦ç‚¹</div>
            <ul>
                <li><strong>Composition</strong> æ˜¯ Compose Runtime çš„æ ¸å¿ƒï¼Œç®¡ç†æ•´ä¸ªç»„åˆè¿‡ç¨‹</li>
                <li><strong>Composer</strong> æ‰§è¡Œ @Composable å‡½æ•°ï¼Œåè°ƒ Slot Table è¯»å†™</li>
                <li><strong>Slot Table</strong> ä»¥ Groups å’Œ Slots å­˜å‚¨ç»„åˆçŠ¶æ€</li>
                <li><strong>Applier</strong> å°†ç»„åˆå˜æ›´è½¬æ¢ä¸ºå…·ä½“çš„ Node Tree æ“ä½œ</li>
                <li><strong>Node Tree</strong> æ˜¯æœ€ç»ˆçš„æ¸²æŸ“ç›®æ ‡ï¼ˆå¦‚ LayoutNodeï¼‰</li>
                <li>Compose Runtime æ˜¯é€šç”¨çš„ï¼Œå¯ç”¨äºé UI åœºæ™¯</li>
                <li>è·³è¿‡æœºåˆ¶ (Skipping) æ˜¯æ€§èƒ½ä¼˜åŒ–çš„å…³é”®</li>
            </ul>
        </div>

        <p>ç†è§£ Compose Runtime çš„å·¥ä½œåŸç†ï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ ï¼š</p>
        <ul>
            <li>å†™å‡ºæ›´é«˜æ•ˆçš„ Composable å‡½æ•°</li>
            <li>ç†è§£ä¸ºä»€ä¹ˆæŸäº›ä»£ç ä¼šè§¦å‘é‡ç»„</li>
            <li>debug å¤æ‚çš„é‡ç»„é—®é¢˜</li>
            <li>æ‰©å±• Compose åˆ°æ–°çš„åº”ç”¨åœºæ™¯</li>
        </ul>
    </article>

    <footer class="footer">
        <p>Â© 2024 Fidroid - ä¸“æ³¨ Android ä¸ Jetpack Compose</p>
    </footer>
</body>
</html>

